num_jobs: 784
cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: DMSO_0.100_DMSO_0.025 shuffle: True
progress: 0
cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: DMSO_0.100_DMSO_0.025 shuffle: False
progress: 0
cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: Flagellin_0.100_DMSO_0.025 shuffle: True
progress: 0
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [01:57<21:31, 117.41s/cell]
Executing:  42%|████▏     | 5/12 [02:03<02:10, 18.71s/cell]
Executing:  75%|███████▌  | 9/12 [02:03<00:25,  8.47s/cell]
Executing:  75%|███████▌  | 9/12 [02:20<00:25,  8.47s/cell]
Executing:  83%|████████▎ | 10/12 [04:36<01:04, 32.26s/cell]
Executing: 100%|██████████| 12/12 [04:42<00:00, 22.88s/cell]
Executing: 100%|██████████| 12/12 [04:44<00:00, 23.67s/cell]
cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: Flagellin_0.100_DMSO_0.025 shuffle: False
progress: 0
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [00:07<01:19,  7.23s/cell]
Executing:  42%|████▏     | 5/12 [00:09<00:10,  1.47s/cell]
Executing:  83%|████████▎ | 10/12 [00:10<00:01,  1.35cell/s]
Executing:  83%|████████▎ | 10/12 [00:11<00:02,  1.11s/cell]
Traceback (most recent call last):
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/bin/papermill", line 8, in <module>
    sys.exit(papermill())
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/decorators.py", line 34, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/cli.py", line 250, in papermill
    execute_notebook(
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/execute.py", line 128, in execute_notebook
    raise_for_execution_errors(nb, output_path)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/execute.py", line 232, in raise_for_execution_errors
    raise error
papermill.exceptions.PapermillExecutionError:
---------------------------------------------------------------------------
Exception encountered at "In [10]":
---------------------------------------------------------------------------
FileNotFoundError                         Traceback (most recent call last)
Cell In[10], line 23
     12 title = f'{output_name.split("__")[0].split("_")[0]} vs {("__").join(output_name.split("__")[1].split("_")[:2])}'
     13 print(title)
     14 (
     15     stats,
     16     recall,
     17     precision,
     18     f1,
     19     precision_,
     20     recall_,
     21     threshold_,
     22     dict_of_treatments,
---> 23 ) = test_loop(test_df, output_name, title)
     24 print(recall, precision, f1)
     26 threshold_ = np.append(threshold_, None)

Cell In[6], line 80, in test_loop(df, output_name, title)
     72     y_pred_list = test_optimized_model(
     73         model,
     74         test_loader,
   (...)
     77         shuffle=mlp_params.SHUFFLE,
     78     )
     79 elif mlp_params.MODEL_TYPE == "Binary_Classification":
---> 80     y_pred_list, y_pred_prob_list = test_optimized_model(
     81         model,
     82         test_loader,
     83         mlp_params,
     84         model_name=mlp_params.MODEL_NAME,
     85         shuffle=mlp_params.SHUFFLE,
     86     )
     87 else:
     88     raise Exception("Model type must be specified for proper model testing")

File /gpfs/alpine1/scratch/mlippincott@xsede.org/Interstellar_Analysis/4.sc_Morphology_Neural_Network_MLP_Model/2.model_testing/notebooks/../../MLP_utils/utils.py:1068, in test_optimized_model(model, test_loader, params, model_name, shuffle)
   1063 elif params.MODEL_TYPE == "Binary_Classification":
   1064     save_state_path = pathlib.Path(
   1065         f"../../trained_models/model_save_states/Binary_Classification/{params.CELL_TYPE}"
   1066     )
   1067     model.load_state_dict(
-> 1068         torch.load(f"{save_state_path}/Binary_Classification_{model_name}.pt")
   1069     )
   1070 elif params.MODEL_TYPE == "Regression":
   1071     save_state_path = pathlib.Path(
   1072         f"../../trained_models/model_save_states/Regression/{params.CELL_TYPE}"
   1073     )

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:791, in load(f, map_location, pickle_module, weights_only, **pickle_load_args)
    788 if 'encoding' not in pickle_load_args.keys():
    789     pickle_load_args['encoding'] = 'utf-8'
--> 791 with _open_file_like(f, 'rb') as opened_file:
    792     if _is_zipfile(opened_file):
    793         # The zipfile reader is going to advance the current file position.
    794         # If we want to actually tail call to torch.jit.load, we need to
    795         # reset back to the original position.
    796         orig_position = opened_file.tell()

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:271, in _open_file_like(name_or_buffer, mode)
    269 def _open_file_like(name_or_buffer, mode):
    270     if _is_path(name_or_buffer):
--> 271         return _open_file(name_or_buffer, mode)
    272     else:
    273         if 'w' in mode:

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:252, in _open_file.__init__(self, name, mode)
    251 def __init__(self, name, mode):
--> 252     super().__init__(open(name, mode))

FileNotFoundError: [Errno 2] No such file or directory: '../../trained_models/model_save_states/Binary_Classification/SHSY5Y/Binary_Classification_DMSO_0.100_DMSO_0.025_vs_Flagellin_0.100_DMSO_0.025.pt'

cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: Flagellin_1.000_DMSO_0.025 shuffle: True
progress: 0
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [00:06<01:09,  6.30s/cell]
Executing:  42%|████▏     | 5/12 [00:08<00:09,  1.33s/cell]
Executing:  83%|████████▎ | 10/12 [02:54<00:41, 20.61s/cell]
Executing: 100%|██████████| 12/12 [03:00<00:00, 16.06s/cell]
Executing: 100%|██████████| 12/12 [03:01<00:00, 15.09s/cell]
cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: Flagellin_1.000_DMSO_0.025 shuffle: False
progress: 0
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [00:49<09:06, 49.67s/cell]
Executing:  42%|████▏     | 5/12 [00:51<00:54,  7.80s/cell]
Executing:  83%|████████▎ | 10/12 [00:52<00:06,  3.26s/cell]
Executing:  83%|████████▎ | 10/12 [00:53<00:10,  5.37s/cell]
Traceback (most recent call last):
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/bin/papermill", line 8, in <module>
    sys.exit(papermill())
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/decorators.py", line 34, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/cli.py", line 250, in papermill
    execute_notebook(
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/execute.py", line 128, in execute_notebook
    raise_for_execution_errors(nb, output_path)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/execute.py", line 232, in raise_for_execution_errors
    raise error
papermill.exceptions.PapermillExecutionError:
---------------------------------------------------------------------------
Exception encountered at "In [10]":
---------------------------------------------------------------------------
FileNotFoundError                         Traceback (most recent call last)
Cell In[10], line 23
     12 title = f'{output_name.split("__")[0].split("_")[0]} vs {("__").join(output_name.split("__")[1].split("_")[:2])}'
     13 print(title)
     14 (
     15     stats,
     16     recall,
     17     precision,
     18     f1,
     19     precision_,
     20     recall_,
     21     threshold_,
     22     dict_of_treatments,
---> 23 ) = test_loop(test_df, output_name, title)
     24 print(recall, precision, f1)
     26 threshold_ = np.append(threshold_, None)

Cell In[6], line 80, in test_loop(df, output_name, title)
     72     y_pred_list = test_optimized_model(
     73         model,
     74         test_loader,
   (...)
     77         shuffle=mlp_params.SHUFFLE,
     78     )
     79 elif mlp_params.MODEL_TYPE == "Binary_Classification":
---> 80     y_pred_list, y_pred_prob_list = test_optimized_model(
     81         model,
     82         test_loader,
     83         mlp_params,
     84         model_name=mlp_params.MODEL_NAME,
     85         shuffle=mlp_params.SHUFFLE,
     86     )
     87 else:
     88     raise Exception("Model type must be specified for proper model testing")

File /gpfs/alpine1/scratch/mlippincott@xsede.org/Interstellar_Analysis/4.sc_Morphology_Neural_Network_MLP_Model/2.model_testing/notebooks/../../MLP_utils/utils.py:1068, in test_optimized_model(model, test_loader, params, model_name, shuffle)
   1063 elif params.MODEL_TYPE == "Binary_Classification":
   1064     save_state_path = pathlib.Path(
   1065         f"../../trained_models/model_save_states/Binary_Classification/{params.CELL_TYPE}"
   1066     )
   1067     model.load_state_dict(
-> 1068         torch.load(f"{save_state_path}/Binary_Classification_{model_name}.pt")
   1069     )
   1070 elif params.MODEL_TYPE == "Regression":
   1071     save_state_path = pathlib.Path(
   1072         f"../../trained_models/model_save_states/Regression/{params.CELL_TYPE}"
   1073     )

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:791, in load(f, map_location, pickle_module, weights_only, **pickle_load_args)
    788 if 'encoding' not in pickle_load_args.keys():
    789     pickle_load_args['encoding'] = 'utf-8'
--> 791 with _open_file_like(f, 'rb') as opened_file:
    792     if _is_zipfile(opened_file):
    793         # The zipfile reader is going to advance the current file position.
    794         # If we want to actually tail call to torch.jit.load, we need to
    795         # reset back to the original position.
    796         orig_position = opened_file.tell()

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:271, in _open_file_like(name_or_buffer, mode)
    269 def _open_file_like(name_or_buffer, mode):
    270     if _is_path(name_or_buffer):
--> 271         return _open_file(name_or_buffer, mode)
    272     else:
    273         if 'w' in mode:

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:252, in _open_file.__init__(self, name, mode)
    251 def __init__(self, name, mode):
--> 252     super().__init__(open(name, mode))

FileNotFoundError: [Errno 2] No such file or directory: '../../trained_models/model_save_states/Binary_Classification/SHSY5Y/Binary_Classification_DMSO_0.100_DMSO_0.025_vs_Flagellin_1.000_DMSO_0.025.pt'

cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: LPS_Nigericin_1.000_1.0_DMSO_0.025 shuffle: True
progress: 1
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [00:06<01:14,  6.79s/cell]
Executing:  42%|████▏     | 5/12 [00:08<00:09,  1.40s/cell]
Executing:  83%|████████▎ | 10/12 [03:18<00:46, 23.49s/cell]
Executing: 100%|██████████| 12/12 [03:24<00:00, 18.22s/cell]
Executing: 100%|██████████| 12/12 [03:25<00:00, 17.11s/cell]
cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: LPS_Nigericin_1.000_1.0_DMSO_0.025 shuffle: False
progress: 1
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [00:14<02:43, 14.82s/cell]
Executing:  42%|████▏     | 5/12 [00:16<00:18,  2.61s/cell]
Executing:  75%|███████▌  | 9/12 [00:16<00:03,  1.19s/cell]
Executing:  83%|████████▎ | 10/12 [00:18<00:03,  1.84s/cell]
Traceback (most recent call last):
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/bin/papermill", line 8, in <module>
    sys.exit(papermill())
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/decorators.py", line 34, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/cli.py", line 250, in papermill
    execute_notebook(
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/execute.py", line 128, in execute_notebook
    raise_for_execution_errors(nb, output_path)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/execute.py", line 232, in raise_for_execution_errors
    raise error
papermill.exceptions.PapermillExecutionError:
---------------------------------------------------------------------------
Exception encountered at "In [10]":
---------------------------------------------------------------------------
FileNotFoundError                         Traceback (most recent call last)
Cell In[10], line 23
     12 title = f'{output_name.split("__")[0].split("_")[0]} vs {("__").join(output_name.split("__")[1].split("_")[:2])}'
     13 print(title)
     14 (
     15     stats,
     16     recall,
     17     precision,
     18     f1,
     19     precision_,
     20     recall_,
     21     threshold_,
     22     dict_of_treatments,
---> 23 ) = test_loop(test_df, output_name, title)
     24 print(recall, precision, f1)
     26 threshold_ = np.append(threshold_, None)

Cell In[6], line 80, in test_loop(df, output_name, title)
     72     y_pred_list = test_optimized_model(
     73         model,
     74         test_loader,
   (...)
     77         shuffle=mlp_params.SHUFFLE,
     78     )
     79 elif mlp_params.MODEL_TYPE == "Binary_Classification":
---> 80     y_pred_list, y_pred_prob_list = test_optimized_model(
     81         model,
     82         test_loader,
     83         mlp_params,
     84         model_name=mlp_params.MODEL_NAME,
     85         shuffle=mlp_params.SHUFFLE,
     86     )
     87 else:
     88     raise Exception("Model type must be specified for proper model testing")

File /gpfs/alpine1/scratch/mlippincott@xsede.org/Interstellar_Analysis/4.sc_Morphology_Neural_Network_MLP_Model/2.model_testing/notebooks/../../MLP_utils/utils.py:1068, in test_optimized_model(model, test_loader, params, model_name, shuffle)
   1063 elif params.MODEL_TYPE == "Binary_Classification":
   1064     save_state_path = pathlib.Path(
   1065         f"../../trained_models/model_save_states/Binary_Classification/{params.CELL_TYPE}"
   1066     )
   1067     model.load_state_dict(
-> 1068         torch.load(f"{save_state_path}/Binary_Classification_{model_name}.pt")
   1069     )
   1070 elif params.MODEL_TYPE == "Regression":
   1071     save_state_path = pathlib.Path(
   1072         f"../../trained_models/model_save_states/Regression/{params.CELL_TYPE}"
   1073     )

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:791, in load(f, map_location, pickle_module, weights_only, **pickle_load_args)
    788 if 'encoding' not in pickle_load_args.keys():
    789     pickle_load_args['encoding'] = 'utf-8'
--> 791 with _open_file_like(f, 'rb') as opened_file:
    792     if _is_zipfile(opened_file):
    793         # The zipfile reader is going to advance the current file position.
    794         # If we want to actually tail call to torch.jit.load, we need to
    795         # reset back to the original position.
    796         orig_position = opened_file.tell()

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:271, in _open_file_like(name_or_buffer, mode)
    269 def _open_file_like(name_or_buffer, mode):
    270     if _is_path(name_or_buffer):
--> 271         return _open_file(name_or_buffer, mode)
    272     else:
    273         if 'w' in mode:

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:252, in _open_file.__init__(self, name, mode)
    251 def __init__(self, name, mode):
--> 252     super().__init__(open(name, mode))

FileNotFoundError: [Errno 2] No such file or directory: '../../trained_models/model_save_states/Binary_Classification/SHSY5Y/Binary_Classification_DMSO_0.100_DMSO_0.025_vs_LPS_Nigericin_1.000_1.0_DMSO_0.025.pt'

cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: LPS_Nigericin_1.000_3.0_DMSO_0.025 shuffle: True
progress: 1
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [00:08<01:31,  8.34s/cell]
Executing:  42%|████▏     | 5/12 [00:10<00:11,  1.64s/cell]
Executing:  83%|████████▎ | 10/12 [02:56<00:41, 20.71s/cell]
Executing: 100%|██████████| 12/12 [03:01<00:00, 16.07s/cell]
Executing: 100%|██████████| 12/12 [03:02<00:00, 15.19s/cell]
cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: LPS_Nigericin_1.000_3.0_DMSO_0.025 shuffle: False
progress: 1
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [00:12<02:16, 12.38s/cell]
Executing:  42%|████▏     | 5/12 [00:14<00:15,  2.24s/cell]
Executing:  83%|████████▎ | 10/12 [00:15<00:02,  1.01s/cell]
Executing:  83%|████████▎ | 10/12 [00:15<00:03,  1.59s/cell]
Traceback (most recent call last):
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/bin/papermill", line 8, in <module>
    sys.exit(papermill())
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/click/decorators.py", line 34, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/cli.py", line 250, in papermill
    execute_notebook(
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/execute.py", line 128, in execute_notebook
    raise_for_execution_errors(nb, output_path)
  File "/projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/papermill/execute.py", line 232, in raise_for_execution_errors
    raise error
papermill.exceptions.PapermillExecutionError:
---------------------------------------------------------------------------
Exception encountered at "In [10]":
---------------------------------------------------------------------------
FileNotFoundError                         Traceback (most recent call last)
Cell In[10], line 23
     12 title = f'{output_name.split("__")[0].split("_")[0]} vs {("__").join(output_name.split("__")[1].split("_")[:2])}'
     13 print(title)
     14 (
     15     stats,
     16     recall,
     17     precision,
     18     f1,
     19     precision_,
     20     recall_,
     21     threshold_,
     22     dict_of_treatments,
---> 23 ) = test_loop(test_df, output_name, title)
     24 print(recall, precision, f1)
     26 threshold_ = np.append(threshold_, None)

Cell In[6], line 80, in test_loop(df, output_name, title)
     72     y_pred_list = test_optimized_model(
     73         model,
     74         test_loader,
   (...)
     77         shuffle=mlp_params.SHUFFLE,
     78     )
     79 elif mlp_params.MODEL_TYPE == "Binary_Classification":
---> 80     y_pred_list, y_pred_prob_list = test_optimized_model(
     81         model,
     82         test_loader,
     83         mlp_params,
     84         model_name=mlp_params.MODEL_NAME,
     85         shuffle=mlp_params.SHUFFLE,
     86     )
     87 else:
     88     raise Exception("Model type must be specified for proper model testing")

File /gpfs/alpine1/scratch/mlippincott@xsede.org/Interstellar_Analysis/4.sc_Morphology_Neural_Network_MLP_Model/2.model_testing/notebooks/../../MLP_utils/utils.py:1068, in test_optimized_model(model, test_loader, params, model_name, shuffle)
   1063 elif params.MODEL_TYPE == "Binary_Classification":
   1064     save_state_path = pathlib.Path(
   1065         f"../../trained_models/model_save_states/Binary_Classification/{params.CELL_TYPE}"
   1066     )
   1067     model.load_state_dict(
-> 1068         torch.load(f"{save_state_path}/Binary_Classification_{model_name}.pt")
   1069     )
   1070 elif params.MODEL_TYPE == "Regression":
   1071     save_state_path = pathlib.Path(
   1072         f"../../trained_models/model_save_states/Regression/{params.CELL_TYPE}"
   1073     )

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:791, in load(f, map_location, pickle_module, weights_only, **pickle_load_args)
    788 if 'encoding' not in pickle_load_args.keys():
    789     pickle_load_args['encoding'] = 'utf-8'
--> 791 with _open_file_like(f, 'rb') as opened_file:
    792     if _is_zipfile(opened_file):
    793         # The zipfile reader is going to advance the current file position.
    794         # If we want to actually tail call to torch.jit.load, we need to
    795         # reset back to the original position.
    796         orig_position = opened_file.tell()

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:271, in _open_file_like(name_or_buffer, mode)
    269 def _open_file_like(name_or_buffer, mode):
    270     if _is_path(name_or_buffer):
--> 271         return _open_file(name_or_buffer, mode)
    272     else:
    273         if 'w' in mode:

File /projects/mlippincott@xsede.org/software/anaconda/envs/Interstellar/lib/python3.10/site-packages/torch/serialization.py:252, in _open_file.__init__(self, name, mode)
    251 def __init__(self, name, mode):
--> 252     super().__init__(open(name, mode))

FileNotFoundError: [Errno 2] No such file or directory: '../../trained_models/model_save_states/Binary_Classification/SHSY5Y/Binary_Classification_DMSO_0.100_DMSO_0.025_vs_LPS_Nigericin_1.000_3.0_DMSO_0.025.pt'

cell_type: SHSY5Y control_name: DMSO_0.100_DMSO_0.025 treatment_name: LPS_Nigericin_1.000_10.0_DMSO_0.025 shuffle: True
progress: 1
Input Notebook:  binary_classification_testing.ipynb
Output Notebook: binary_classification_testing.ipynb

Executing:   0%|          | 0/12 [00:00<?, ?cell/s]Executing notebook with kernel: python3

Executing:   8%|▊         | 1/12 [00:05<01:05,  6.00s/cell]
Executing:  42%|████▏     | 5/12 [00:07<00:08,  1.28s/cell]
Executing:  83%|████████▎ | 10/12 [02:38<00:37, 18.67s/cell]slurmstepd: error: *** JOB 3021830 ON c3mem-a4-u36-2 CANCELLED AT 2023-09-18T13:29:53 ***
